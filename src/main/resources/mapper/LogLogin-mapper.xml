<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper SYSTEM "mybatis-3-mapper.dtd">

<mapper namespace="LogLogin">
    
    <!-- 모든 데이터 조회 -->
    <select id="findAll" resultType="logLogin">
        SELECT * FROM THURXE_CLOGNL
    </select>    
    
    <!-- 기본키 데이터 중복여부 조회 -->
    <select id="countById" parameterType="Long" resultType="logLogin">
        SELECT COUNT(*)
        FROM THURXE_CLOGNL 
        WHERE 
            LGN_LOG_SNO = #{LGN_LOG_SNO}
    </select>
    
    <!-- 신규 데이터 추가 --> 
    <insert id="insert" parameterType="logLogin">
        INSERT INTO THURXE_CLOGNL
        (
            ENO, 
            LGN_KD_NM, 
            LGN_SCS_YN, 
            GNT_DTM
        )
        VALUES(
            #{ENO},
            #{LGN_KD_NM},
            #{LGN_SCS_YN},
            SYSDATE
        )
    </insert>

    <!-- 일자별 건수 조회 -->
    <select id="findLoginCountsByDate" resultType="epams.com.admin.dto.CountByDateDTO">
        SELECT
            TO_CHAR(GNT_DTM, 'YYYY-MM-DD') AS createdDate,
            COUNT(*) AS count
        FROM
            THURXE_CLOGNL
        GROUP BY
            TO_CHAR(GNT_DTM, 'YYYY-MM-DD')
        ORDER BY
            TO_CHAR(GNT_DTM, 'YYYY-MM-DD')
    </select>
    
    <!-- 기존 데이터 삭제 (로그 테이블 특성상 불필요) --> 
    
    <!-- 기존 데이터 업데이트 (로그 테이블 특성상 불필요) -->

</mapper>